{"./":{"url":"./","title":"Introduction","keywords":"","body":"目录 必读文档 报文格式 常见问题 解密验签 其他错误 非java语言开发 shell工具类 北京xx公司版权所有 all right reserved，powered by Gitbook该文章修订时间： 2020-12-05 10:25:00 "},"data/报文格式.html":{"url":"data/报文格式.html","title":"报文格式","keywords":"","body":" 关于报文 加解密，加验签针对的都是原json串 要发送的原json串 { \"mchtid\":\"B000001\", \"mchtNo\":\"B000011\", \"random\":\"6471240\", \"timestamp\":\"20190718161237\", \"orderNo\":\"20190524152503\" } 最终发送的报文格式 加密，签名之前注意要对json进行utf8转码 对json串加密后放入body字段，对json串加签后放入signature字段 { \"version\":\"1.0\", \"appid\":\"你的appid,商服申请获得\", \"signature\":\"对json对象签名后的字符串\", \"body\":\"对json加密后的字符串\" } 关于加密工具类 对于加密工具类，仅提供java版本和shell版本 如果商户开发语言为非Java，只能使用shell版本 关于回调 回调发送的是json报文，所以要以json方式接收 接收不到的时候检查接收方式 如果确定处理完成，需要返回报文 标识处理成功的参数 {\"status\":\"SUCCESS\"} 如果没有返回此参数，或者返回的不是此值， 返回的最终报文需要遵循报文格式 { \"version\":\"1.0\", \"appid\":\"你的appid,商服申请获得\", \"signature\":\"对json对象签名后的字符串\", \"body\":\"对json加密后的字符串\" } 否则系统会每隔五秒钟向商户重新发送回调，发送五次后结束。 c#开发语言，需要.NET版本4.6+ java开发需要jdk8+ 北京xx公司版权所有 all right reserved，powered by Gitbook该文章修订时间： 2020-12-05 10:25:00 "},"data/解密验签.html":{"url":"data/解密验签.html","title":"解密验签","keywords":"","body":" 解密失败 信封解密失败：openPKCS7ENC error：Illegal key size 信封解密失败：openPKCS7ENC error：open_SessionKey error：Decryption error 解决方案： 将security-jdk加解密.zip文件解压后，放到jdk的相关目录下 验签失败 解决方案 我方使用商户公钥对报文进行验签，检查私钥生成渠道是否有问题 北京xx公司版权所有 all right reserved，powered by Gitbook该文章修订时间： 2020-12-05 10:25:00 "},"data/其他错误.html":{"url":"data/其他错误.html","title":"其他错误","keywords":"","body":" 报错信息 解决方案 请求了不存在的路径 服务有问题，重启后解决 北京xx公司版权所有 all right reserved，powered by Gitbook该文章修订时间： 2020-12-05 10:25:00 "},"data/shell调用.html":{"url":"data/shell调用.html","title":"shell工具类","keywords":"","body":"仅适用于非Java开发者。 比如：php、c#、python…… 签名 # manjaro @ manjaro in ~/Documents/kayak [9:14:41] $ sh tools/kayakTool.sh 3 \"需要签名的json串\" k私钥文件路径（推荐使用绝对路径） 私钥密码 验签 # manjaro @ manjaro in ~/Documents/kayak [9:17:48] $ sh tools/kayakTool.sh 4 \"验签原文json串\" \"签名后的字符串\" 银行公钥证书路径（推荐使用绝对路径） true 加密 # manjaro @ manjaro in ~/Documents/kayak [9:28:44] $ sh tools/kayakTool.sh 1 银行公钥证书路径（推荐使用绝对路径） \"要加密的json报文\" 返回加密后的字符串 解密 # manjaro @ manjaro in ~/Documents/kayak [9:29:11] $ sh tools/kayakTool.sh 2 私钥文件路径（推荐使用绝对路径） 私钥密码 \"待解密的字符串\" {\"body\":\"报文体\",\"sign\":\"签名\"} 注意事项： ​ json串中需要对“和空格转义，字符前添加\\即可。 C#错误汇总 报错信息：请求被终止，未能创建SSL/TLS安全通道 商户升级本地开发的.NET版本到4.6后解决 北京xx公司版权所有 all right reserved，powered by Gitbook该文章修订时间： 2020-12-05 10:25:00 "}}